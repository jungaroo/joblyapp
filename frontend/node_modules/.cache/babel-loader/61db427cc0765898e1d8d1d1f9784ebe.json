{"ast":null,"code":"import _objectWithoutProperties from \"/Users/orlando/Projects/Rithm/Projects/jobly/jobly/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _objectSpread from \"/Users/orlando/Projects/Rithm/Projects/jobly/jobly/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport axios from 'axios';\nconst BASE_URL = \"http://localhost:3001\";\nexport default class JoblyApi {\n  static async request(endpoint, paramsOrData = {}, verb = \"get\") {\n    paramsOrData._token = localStorage.getItem('token'); // console.debug(\"API Call:\", endpoint, paramsOrData, verb);\n\n    try {\n      return (await axios({\n        method: verb,\n        url: \"\".concat(BASE_URL, \"/\").concat(endpoint),\n        [verb === \"get\" ? \"params\" : \"data\"]: paramsOrData\n      })).data; // axios sends query string data via the \"params\" key,\n      // and request body data via the \"data\" key,\n      // so the key we need depends on the HTTP verb\n    } catch (err) {\n      console.error(\"API Error:\", err.response);\n      let message = err.response.data.message;\n      throw Array.isArray(message) ? message : [message];\n    }\n  }\n\n  static async loginUser(username, password) {\n    let res = await this.request('login', {\n      username: username || 'testuser',\n      password: password || 'secret'\n    }, 'post');\n    return [res.token, username];\n  }\n  /** Pulling data from API  */\n\n\n  static async getCompany(handle) {\n    let res = await this.request(\"companies/\".concat(handle));\n    return res.company;\n  }\n\n  static async getCompanies() {\n    let res = await this.request(\"companies/\");\n    return res.companies;\n  }\n\n  static async getJobs() {\n    let res = await this.request('jobs');\n    return res.jobs;\n  }\n\n  static async search(path, search) {\n    let res = await this.request(\"\".concat(path, \"?search=\").concat(search));\n    return res[path];\n  }\n\n  static async registerUser(user) {\n    let res = await this.request(\"users\", user, 'post');\n    return [res.token, user.username];\n  }\n\n  static async updateUser(username, body) {\n    let res = await this.request(\"users/\".concat(username), _objectSpread({}, body), 'patch');\n    return res.user.username;\n  }\n\n  static async getUser(user) {\n    let res = await this.request(\"users/\".concat(user));\n\n    let _res$user = res.user,\n        username = _res$user.username,\n        password = _res$user.password,\n        info = _objectWithoutProperties(_res$user, [\"username\", \"password\"]);\n\n    return info;\n  }\n\n  static async applyToJob(jobid, username, state) {\n    let body = {\n      username,\n      // user name\n      state // applied\n\n    };\n    let res = await this.request(\"jobs/\".concat(jobid, \"/apply\"), body, 'post');\n    return res.message;\n  }\n\n}","map":{"version":3,"sources":["/Users/orlando/Projects/Rithm/Projects/jobly/jobly/src/JoblyApi.js"],"names":["axios","BASE_URL","JoblyApi","request","endpoint","paramsOrData","verb","_token","localStorage","getItem","method","url","data","err","console","error","response","message","Array","isArray","loginUser","username","password","res","token","getCompany","handle","company","getCompanies","companies","getJobs","jobs","search","path","registerUser","user","updateUser","body","getUser","info","applyToJob","jobid","state"],"mappings":"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","sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = `http://localhost:3001`;\n\nexport default class JoblyApi {\n  static async request(endpoint, paramsOrData = {}, verb = \"get\") {\n\n    paramsOrData._token = localStorage.getItem('token');\n\n    // console.debug(\"API Call:\", endpoint, paramsOrData, verb);\n\n    try {\n      return (await axios({\n        method: verb,\n        url: `${BASE_URL}/${endpoint}`,\n        [verb === \"get\" ? \"params\" : \"data\"]: paramsOrData\n      })).data;\n      // axios sends query string data via the \"params\" key,\n      // and request body data via the \"data\" key,\n      // so the key we need depends on the HTTP verb\n    }\n\n    catch (err) {\n      console.error(\"API Error:\", err.response);\n      let message = err.response.data.message;\n      throw Array.isArray(message) ? message : [message];\n    }\n  }\n\n  static async loginUser(username, password) {\n    let res = await this.request('login', {\n      username: username || 'testuser',\n      password: password || 'secret',\n    }, 'post');\n    return  [res.token, username];\n  }\n\n  /** Pulling data from API  */\n  static async getCompany(handle) {\n    let res = await this.request(`companies/${handle}`);\n    return res.company;\n  }\n\n  static async getCompanies() {\n    let res = await this.request(`companies/`);\n    return res.companies;\n  }\n\n  static async getJobs() {\n    let res = await this.request('jobs');\n    return res.jobs;\n  }\n  \n  static async search(path, search) {\n    let res = await this.request(`${path}?search=${search}`);\n    return res[path];\n  }\n\n  static async registerUser(user){\n    let res = await this.request(`users`, user, 'post');\n    return [res.token, user.username];\n  }\n  \n  static async updateUser(username, body){\n    let res = await this.request(`users/${username}`,{...body}, 'patch');\n    return res.user.username;\n  }\n\n  static async getUser(user){\n    let res = await this.request(`users/${user}`);\n    let {username, password, ...info} = res.user;\n    return info;\n  }\n\n  static async applyToJob(jobid, username, state) {\n    let body = {\n      username, // user name\n      state  // applied\n    };\n    let res = await this.request(`jobs/${jobid}/apply`, body, 'post');\n    return res.message;\n  }\n  \n}"]},"metadata":{},"sourceType":"module"}